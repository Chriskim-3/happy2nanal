<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>행복한 나날</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            margin: 0;
            padding: 0;
            font-size: 16px;
        }
        .header {
            background-color: #f0f0f0;
            padding: 20px;
            text-align: center;
        }
        .support-message {
            color: #006994;
            font-size: 0.8em;
        }
        .main-title {
            font-size: 2em;
            margin-top: 10px;
            cursor: pointer;
        }
        .menu-bar {
            background-color: #333;
            overflow: hidden;
            padding: 10px 0;
        }
        .menu-bar a, .menu-bar .dropbtn {
            color: white;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
            font-size: 16px;
            height: 40px;
            line-height: 40px;
            margin: 0 5px;
        }
        .dropdown {
            display: inline-block;
        }
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #f9f9f9;
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
        }
        .dropdown-content a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            text-align: left;
        }
        .dropdown:hover .dropdown-content {
            display: block;
        }
        .content {
            margin: 20px;
            padding: 20px;
        }
        .main {
            padding: 20px;
        }
        .footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 10px;
            position: fixed;
            bottom: 0;
            width: 100%;
        }
        .search-bar {
            float: right;
            padding: 6px;
            margin-top: 8px;
            margin-right: 16px;
        }
        #editor {
            width: 100%;
            height: 300px;
            margin-bottom: 20px;
            padding: 10px;
        }
        #postList, #noticeList, #downloadList {
            list-style-type: none;
            padding: 0;
        }
        #postList li, #noticeList li, #downloadList li {
            cursor: pointer;
            padding: 15px;
            border-bottom: 1px solid #ddd;
            margin-bottom: 10px;
        }
        #postList li:hover, #noticeList li:hover, #downloadList li:hover {
            background-color: #f5f5f5;
        }
        .post-content {
            margin-bottom: 30px;
        }
        .button-container {
            text-align: center;
            margin-top: 20px;
        }
        .button-container button {
            margin: 0 10px;
            padding: 10px 20px;
            height: 40px;
        }
        input[type="text"], input[type="password"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            height: 40px;
        }
        .sub-menu {
            font-size: 0.8em;
            margin-left: 10px;
        }
        .copyright {
            font-size: 0.8em;
            margin-top: 20px;
        }
        .comment-section {
            margin-top: 20px;
        }
        .comment-section textarea {
            width: 100%;
            height: 100px;
            margin-bottom: 10px;
            padding: 10px;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="support-message">당신의 칼퇴를 응원합니다!</div>
        <h1 class="main-title" onclick="showHomePage()">행복한 나날</h1>
    </div>

    <div class="menu-bar">
        <div class="dropdown">
            <button class="dropbtn">소개</button>
            <div class="dropdown-content">
                <a href="#" onclick="showContent('이 홈페이지는 글쓰고, 올리고, 지울려고 만드는 사이트 입니다. 모쪼록 방해마세요')">이 홈페이지는</a>
                <a href="#" onclick="showContent('이 사이트는 깃헙을 바탕으로 만들어졌습니다')">참고하세요</a>
            </div>
        </div>
        <div class="dropdown">
            <button class="dropbtn">코딩공부</button>
            <div class="dropdown-content">
                <a href="#" onclick="showCodingStudyList('python')">파이썬</a>
                <a href="#" onclick="showCodingStudyList('autohotkey')">오토핫키</a>
                <a href="#" onclick="showCodingStudyList('javascript')">자바스크립트</a>
                <a href="#" onclick="showCodingStudyList('hwp')">hwp</a>
                <a href="#" onclick="showCodingStudyList('indesign')">인디자인</a>
            </div>
        </div>
        <a href="#" onclick="showCommunicationBoard()">소통창구</a>
        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="검색...">
            <button onclick="search()">검색</button>
        </div>
    </div>

    <div class="content">
        <div class="main" id="mainContent">
            <!-- 여기에 메뉴 선택에 따른 내용이 표시됩니다 -->
        </div>
    </div>

    <div class="footer">
        <div class="copyright">Copyright © 2024 https://chriskim-3.github.io/happy2nanal/ Ltd. All rights reserved.</div>
    </div>

    <script>
        let posts = JSON.parse(localStorage.getItem('posts')) || [];
        let notices = JSON.parse(localStorage.getItem('notices')) || [];
        let downloads = JSON.parse(localStorage.getItem('downloads')) || [];
        let codingStudies = JSON.parse(localStorage.getItem('codingStudies')) || {
            python: [],
            autohotkey: [],
            javascript: [],
            hwp: [],
            indesign: []
        };

        function showHomePage() {
            document.getElementById('mainContent').innerHTML = '<h2>환영합니다!</h2><p>행복한 나날에 오신 것을 환영합니다.</p>';
        }

        function showContent(content) {
            document.getElementById('mainContent').innerHTML = `<p>${content}</p>`;
        }

        function showCodingStudyList(category) {
            let listHtml = `<h2>${category} 학습 목록</h2><ul id="codingStudyList">`;
            codingStudies[category].forEach((study, index) => {
                listHtml += `
                    <li>
                        <h3>${study.title}</h3>
                        <p>${study.content}</p>
                        <a href="${study.link}" target="_blank">바로가기</a>
                    </li>`;
            });
            listHtml += '</ul>';
            document.getElementById('mainContent').innerHTML = listHtml;
        }

        function showCommunicationBoard() {
            let boardHtml = '<h2>소통창구</h2>';
            boardHtml += '<div class="button-container"><button onclick="showWriteForm()">글쓰기</button></div>';
            boardHtml += '<ul id="postList">';
            posts.forEach((post, index) => {
                boardHtml += `<li onclick="viewPost(${index})">${post.title}</li>`;
            });
            boardHtml += '</ul>';
            document.getElementById('mainContent').innerHTML = boardHtml;
        }

        function showWriteForm() {
            document.getElementById('mainContent').innerHTML = `
                <h2>글쓰기</h2>
                <input type="text" id="postTitle" placeholder="제목을 입력하세요">
                <textarea id="editor" placeholder="여기에 글을 작성하세요..."></textarea>
                <input type="file" id="imageUpload" accept="image/*">
                <div class="button-container">
                    <button onclick="savePost()">저장</button>
                </div>
            `;
        }

        function savePost() {
            const title = document.getElementById('postTitle').value;
            const content = document.getElementById('editor').value;
            const imageInput = document.getElementById('imageUpload');
            if (title && content) {
                let post = {title, content, comments: []};
                if (imageInput.files && imageInput.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        post.image = e.target.result;
                        posts.push(post);
                        localStorage.setItem('posts', JSON.stringify(posts));
                        showCommunicationBoard();
                    };
                    reader.readAsDataURL(imageInput.files[0]);
                } else {
                    posts.push(post);
                    localStorage.setItem('posts', JSON.stringify(posts));
                    showCommunicationBoard();
                }
            }
        }

        function viewPost(index) {
            const post = posts[index];
            let postHtml = `
                <h2>${post.title}</h2>
                <div class="post-content">${post.content}</div>
            `;
            if (post.image) {
                postHtml += `<img src="${post.image}" alt="Post Image" style="max-width: 100%;">`;
            }
            postHtml += `
                <div class="button-container">
                    <button onclick="editPost(${index})">수정</button>
                    <button onclick="deletePost(${index})">삭제</button>
                </div>
                <div class="comment-section">
                    <h3>댓글</h3>
                    <ul>
                        ${post.comments.map(comment => `<li>${comment}</li>`).join('')}
                    </ul>
                    <textarea id="commentInput" placeholder="댓글을 입력하세요..."></textarea>
                    <div class="button-container">
                        <button onclick="addComment(${index})">댓글 추가</button>
                    </div>
                </div>
            `;
            document.getElementById('mainContent').innerHTML = postHtml;
        }

        function editPost(index) {
            const post = posts[index];
            document.getElementById('mainContent').innerHTML = `
                <h2>글 수정</h2>
                <input type="text" id="editTitle" value="${post.title}">
                <textarea id="editEditor">${post.content}</textarea>
                <input type="file" id="editImageUpload" accept="image/*">
                <div class="button-container">
                    <button onclick="updatePost(${index})">업데이트</button>
                </div>
            `;
        }

        function updatePost(index) {
            const title = document.getElementById('editTitle').value;
            const content = document.getElementById('editEditor').value;
            const imageInput = document.getElementById('editImageUpload');
            if (title && content) {
                let post = {...posts[index], title, content};
                if (imageInput.files && imageInput.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        post.image = e.target.result;
                        posts[index] = post;
                        localStorage.setItem('posts', JSON.stringify(posts));
                        viewPost(index);
                    };
                    reader.readAsDataURL(imageInput.files[0]);
                } else {
                    posts[index] = post;
                    localStorage.setItem('posts', JSON.stringify(posts));
                    viewPost(index);
                }
            }
        }

        function deletePost(index) {
            posts.splice(index, 1);
            localStorage.setItem('posts', JSON.stringify(posts));
            showCommunicationBoard();
        }

        function addComment(postIndex) {
            const commentInput = document.getElementById('commentInput');
            if (commentInput.value) {
                posts[postIndex].comments.push(commentInput.value);
                localStorage.setItem('posts', JSON.stringify(posts));
                viewPost(postIndex);
            }
        }

        function search() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            let results = [];
            posts.forEach((post, index) => {
                if (post.title.toLowerCase().includes(searchTerm) || post.content.toLowerCase().includes(searchTerm)) {
                    results.push({type: '소통창구', item: post, index: index});
                }
            });
            Object.keys(codingStudies).forEach(category => {
                codingStudies[category].forEach((study, index) => {
                    if (study.title.toLowerCase().includes(searchTerm) || study.content.toLowerCase().includes(searchTerm)) {
                        results.push({type: `코딩공부 (${category})`, item: study, index: index, category: category});
                    }
                });
            });
            let resultHtml = '<h2>검색 결과</h2><ul>';
            results.forEach(result => {
                if (result.type === '소통창구') {
                    resultHtml += `<li onclick="viewPost(${result.index})">[${result.type}] ${result.item.title}</li>`;
                } else {
                    resultHtml += `<li onclick="viewCodingStudy('${result.category}', ${result.index})">[${result.type}] ${result.item.title}</li>`;
                }
            });
            resultHtml += '</ul>';
            document.getElementById('mainContent').innerHTML = resultHtml;
        }

        function viewCodingStudy(category, index) {
            const study = codingStudies[category][index];
            document.getElementById('mainContent').innerHTML = `
                <h2>${study.title}</h2>
                <p>${study.content}</p>
                <a href="${study.link}" target="_blank">바로가기</a>
            `;
        }

        // 오토핫키 컨텐츠
codingStudies.autohotkey = [
    {
        title: "윈도우 조작 기본",
        content: "윈도우 활성화, 이동, 크기 조절 등의 기본 명령어를 학습합니다. WinActivate, WinMove, WinResize 등의 함수 사용법을 익힙니다.",
        link: "https://www.autohotkey.com/docs/v2/lib/Win.htm"
    },
    {
        title: "핫키 설정하기",
        content: "자주 사용하는 작업을 단축키로 설정하는 방법을 배웁니다. 키 조합, 모디파이어 키 사용법, 핫키 우선순위 설정 등을 다룹니다.",
        link: "https://www.autohotkey.com/docs/v2/Hotkeys.htm"
    },
    {
        title: "문자열 조작",
        content: "문자열을 다루는 다양한 함수와 사용법을 소개합니다. SubStr, StrReplace, RegExMatch 등의 함수를 활용한 문자열 처리 방법을 학습합니다.",
        link: "https://www.autohotkey.com/docs/v2/lib/String.htm"
    },
    {
        title: "파일 및 폴더 작업",
        content: "파일 생성, 삭제, 이동 등의 작업을 자동화하는 방법을 배웁니다. FileRead, FileAppend, FileMove 등의 함수 사용법을 익힙니다.",
        link: "https://www.autohotkey.com/docs/v2/lib/File.htm"
    },
    {
        title: "GUI 만들기",
        content: "사용자 인터페이스를 만드는 방법과 이벤트 처리 방법을 알아봅니다. Gui 객체를 사용한 윈도우 생성, 컨트롤 추가, 이벤트 핸들링 등을 학습합니다.",
        link: "https://www.autohotkey.com/docs/v2/lib/Gui.htm"
    },
    {
        title: "루프와 조건문",
        content: "반복 작업과 조건에 따른 실행을 구현하는 방법을 설명합니다. Loop, While, If 문의 사용법과 고급 테크닉을 배웁니다.",
        link: "https://www.autohotkey.com/docs/v2/Language.htm#flow-control"
    },
    {
        title: "시스템 정보 얻기",
        content: "시스템 정보를 얻고 활용하는 방법을 소개합니다. A_ScreenWidth, A_ScreenHeight, A_OSVersion 등의 내장 변수 사용법을 익힙니다.",
        link: "https://www.autohotkey.com/docs/v2/lib/BuiltIn.htm#variables"
    },
    {
        title: "인터넷 작업 자동화",
        content: "웹 브라우저 조작과 간단한 웹 스크래핑 방법을 배웁니다. ComObject를 사용한 IE 자동화, UrlDownloadToFile 함수 사용법 등을 학습합니다.",
        link: "https://www.autohotkey.com/docs/v2/lib/ComObject.htm"
    },
    {
        title: "이미지 처리",
        content: "스크린샷 찍기, 이미지 편집 등의 작업을 자동화하는 방법을 알아봅니다. GDI+ 라이브러리를 사용한 이미지 처리 방법을 학습합니다.",
        link: "https://www.autohotkey.com/docs/v2/lib/Gui.htm#bitmap"
    },
    {
        title: "고급 테크닉",
        content: "DLL 호출, COM 객체 사용 등 고급 기능을 활용하는 방법을 소개합니다. DllCall, ComObject 함수의 심화 사용법을 익힙니다.",
        link: "https://www.autohotkey.com/docs/v2/lib/DllCall.htm"
    }
];
